{% extends "indexbase.html" %}
{% block content %}
<div class="infinite-container" id="container">
    <div>
        <p>タイトル</p>
    </div>

    {% for video in object_list %}
    <div class="infinite-item">
        <p>**************</p>
        <p>{{ video.name }}</p>
        <p style="width:70%; word-wrap:break-word;">{{ video.title }}</p>
        <video src="https://res.cloudinary.com/dhlsaygev/video/upload/{{ video.video }}.mp4" controls width="500" height="700"></video>
        <script>
          const cld = cloudinary.Cloudinary.new({ cloud_name: 'dhlsaygev' });
          cld.videoPlayer('video');
        </script>
        <br>
        <br>
    </div>
    {% endfor %}
    {% load static %}
<script src="{% static 'js/scroll.js' %}"></script>
</div>

<div class="loading" style="display: none;">
    読み込み中...
</div>

{% if page_obj.has_next %}
<a class="infinite-more-link" href="?page={{ page_obj.next_page_number }}">さらに読み込む</a>
{% endif %}
{% endblock %}


{% block extrajs %}
<script>
  $('.infinite-container').waypoint('infinite', {
    container: 'auto',
    items: '.infinite-item',
    more: '.infinite-more-link',
    offset: 'bottom-in-view',
    loadingClass: 'infinite-loading',
    onBeforePageLoad: function () {
      $('.loading').show();
      },
      onAfterPageLoad: function ($items) {
      $('.loading').hide();
  }
});
</script>
{% endblock %} 
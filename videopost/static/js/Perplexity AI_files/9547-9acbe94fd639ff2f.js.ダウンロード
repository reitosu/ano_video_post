"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9547],{58822:function(e,t,s){s.d(t,{u:function(){return a},y:function(){return o}});var n=s(85893),l=s(33729),i=s(9008),r=s.n(i);let a=e=>{var t,s,i;let{initialResults:r}=e,a=null==r?void 0:r[0];if(!a)return(0,n.jsx)(n.Fragment,{});let u=(0,l.EH)(a);if(!u)return(0,n.jsx)(n.Fragment,{});let d=null!==(t=a.s3_social_preview_url)&&void 0!==t?t:l.FO,x=null!==(s=a.query_str)&&void 0!==s?s:"Perpleixty AI",m=c(null!==(i=u.answer)&&void 0!==i?i:"Perplexity AI unlocks the power of knowledge with information discovery and sharing.");return(0,n.jsx)(o,{imageURL:d,title:x,description:m})},o=e=>{let{title:t,description:s,imageURL:l}=e;return(0,n.jsxs)(r(),{children:[(0,n.jsx)("meta",{property:"og:locale",content:"en_US"}),l&&(0,n.jsx)("meta",{property:"og:image",content:l}),(0,n.jsx)("meta",{property:"og:title",content:t}),(0,n.jsx)("meta",{property:"og:description",content:s}),(0,n.jsx)("meta",{property:"og:type",content:"website"}),(0,n.jsx)("meta",{property:"og:site_name",content:"Perplexity AI"}),(0,n.jsx)("meta",{name:"twitter:card",content:s?"summary_large_image":"summary"}),l&&(0,n.jsx)("meta",{name:"twitter:image",content:l}),(0,n.jsx)("meta",{name:"twitter:site",content:"@perplexity_ai"}),(0,n.jsx)("meta",{name:"twitter:title",content:t}),(0,n.jsx)("meta",{name:"twitter:description",content:s}),(0,n.jsx)("title",{children:t}),(0,n.jsx)("meta",{name:"description",content:s})]})},c=e=>{let t=e.split("|")[0].trim(),s=t.split("```")[0].trim();return s.length<e.length?"".concat(s,"..."):e}},19547:function(e,t,s){s.d(t,{j:function(){return M}});var n=s(85893),l=s(96113),i=s(37414),r=s(33729),a=s(87072),o=s(94184),c=s.n(o),u=s(33299),d=s(67294),x=s(9473);let m=d.memo(e=>{let{data:t}=(0,u.useSession)(),[s,o]=(0,d.useState)(!1),m=(0,x.v9)(i.$0),h=!!t,p=(0,x.v9)(i.ig),v=(0,d.useCallback)(s=>{var n;if(!t&&m){o(!0);return}null===(n=e.onChange)||void 0===n||n.call(e,s)},[m,e,t]),f=(0,r.dD)();return(0,n.jsxs)(r.xu,{className:c()("max-w-screen-md md:px-lg mx-auto",{"":!0}),children:[m&&!h&&(0,n.jsx)(r.xu,{variant:"offset",className:"rounded-full p-0 text-center hidden md:block",children:(0,n.jsx)(r.Av,{text:"Login to ask a follow-up",fullWidth:!0,pill:!0,size:r.$u.large,icon:a.BEY,onClick:()=>o(!0)})}),m&&h&&p<=0&&(0,n.jsxs)(r.xu,{variant:"offset",className:"rounded-full py-md px-lg flex items-center gap-md",children:[(0,n.jsx)(r.RT,{color:"light",variant:"baseSemi",children:"You are out of Copilot uses. Try Perplexity Pro for 300+ uses per day."}),(0,n.jsx)(r.zx,{size:"small",variant:"primary",text:"Learn More",href:"/pro"})]}),(!m||m&&h&&p>0)&&(0,n.jsxs)(r.xu,{variant:f?"background":"offset",className:"rounded-full flex items-center gap-x-xs transition-all duration-300",children:[(null==e?void 0:e.showStopButton)&&(0,n.jsx)("div",{className:"md:ml-md transition-all duration-300 animate-in zoom-in-75",children:(0,n.jsx)(r.zx,{toolTip:"Stop generating response",variant:"rejecter",pill:!0,icon:a.Bg$,onClick:null==e?void 0:e.onStopButtonClick})}),(0,n.jsx)("div",{className:"grow transition-all duration-300",children:(0,n.jsx)(r.nj,{className:"md:p-sm bg-offset dark:bg-offsetDark",hasShadow:!0,...e,onChange:v,isCopilot:m})})]}),(0,n.jsx)(l._,{isOpen:s,onClose:()=>o(!1)})]})}),h=d.memo(e=>{let{contextUUID:t,title:s,rwToken:l}=e,[i,r]=(0,d.useState)(!1),[a,o]=(0,d.useState)(null!=s?s:"Untitled Thread");return(0,d.useCallback)(()=>{r(()=>!0)},[]),(0,d.useCallback)(()=>{r(()=>!1)},[]),(0,d.useCallback)((e,s)=>{if(!t){console.warn("No thread UUID found.");return}if(!l){console.warn("No write token found.");return}o(e),r(!1)},[t,l]),(0,n.jsx)(n.Fragment,{})});class p extends d.Component{static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.log({error:e,errorInfo:t})}render(){if(this.state.hasError){var e;return(null===(e=this.props)||void 0===e?void 0:e.fallback)?this.props.fallback:(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{children:"Oops, there is an error!"}),(0,n.jsx)("button",{type:"button",onClick:()=>this.setState({hasError:!1}),children:"Try again?"})]})}return this.props.children}constructor(e){super(e),this.state={hasError:!1}}}var v=s(30385),f=s(90265),j=s(89224),g=s(58917),k=s(37122),w=s(60379),b=s(12022),y=s(43703),C=s(11163),_=s(43810),N=s(13967),S=s(58822),z=s(14181),E=s(44195),R=s(99603);let U=e=>{let{}=e,t=(0,x.v9)(k.il),s=(0,x.v9)(k.$q),[i,o]=(0,d.useState)(!1),{data:m}=(0,u.useSession)(),h=(0,d.useContext)(r.Vw),p=(0,x.I0)();if(!(null==t?void 0:t.backend_uuid)||!s)return(0,n.jsx)(n.Fragment,{});let v=()=>{if(h){if(!m){o(!0);return}h.emit("toggle_thread_like",t.backend_uuid,e=>{var t,s;p((0,k.ZU)(null!==(t=null==e?void 0:e.user_likes)&&void 0!==t&&t)),p((0,k.Su)(null!==(s=null==e?void 0:e.like_count)&&void 0!==s?s:0))})}};return(0,n.jsxs)(r.xu,{className:"border rounded-full px-sm py-xs flex items-center gap-x-sm ",children:[s&&s.viewCount>0&&(0,n.jsxs)(r.RT,{variant:"smallBold",color:"light",className:"flex items-center gap-x-xs",children:[(0,n.jsx)(R.G,{size:"sm",fixedWidth:!0,icon:a.Mdf}),(0,n.jsx)("div",{children:(0,r.uf)(s.viewCount)})]}),s&&s.forkCount>0&&(0,n.jsxs)(r.RT,{variant:"smallBold",color:"light",className:"flex items-center gap-x-xs",children:[(0,n.jsx)(R.G,{size:"sm",fixedWidth:!0,icon:a.MDP}),(0,n.jsx)("div",{children:(0,r.uf)(s.forkCount)})]}),(0,n.jsx)(r.xu,{className:"",onClick:v,children:(0,n.jsxs)(r.RT,{variant:"smallBold",color:(null==s?void 0:s.userLikes)?"red":"light",className:c()("flex items-center gap-x-xs transition duration-300 select-none cursor-pointer hover:text-superAlt"),children:[(0,n.jsx)("div",{className:c()({"animate-in zoom-in-125 duration-500  ease-in-out repeat-1":null==s?void 0:s.userLikes}),children:(0,n.jsx)(R.G,{size:"sm",fixedWidth:!0,icon:a.m6i})}),(0,n.jsx)("div",{children:(null==s?void 0:s.likeCount)>0?(0,r.uf)(s.likeCount):"Like"})]})}),(0,n.jsx)(l._,{isOpen:i,onClose:()=>o(!1)})]})},T=e=>{let{searchFocus:t}=e,s=(0,r.xc)(),l=(0,x.v9)(k.qc),i=!(null==l?void 0:l.contextUUID)&&!l.hasPending;return(0,n.jsxs)("div",{className:"flex items-center gap-x-xs",children:[!i&&(0,n.jsx)(r.xu,{className:"border rounded-full py-xs px-sm pl-xs",children:(0,n.jsx)(z.Z,{anon:null===l.author_username||""===l.author_username,image:l.author_image,username:l.author_username,showAvatar:!0,showCreatorLabel:!1,showEdit:!1,isCurrentUser:!1})}),null!=t&&"internet"!==t&&(0,n.jsx)(r.xu,{className:"border rounded-full py-xs px-sm",children:(0,n.jsx)(E.Z,{textVariant:"smallBold",searchFocus:t})}),s&&(0,n.jsx)(U,{})]})};var F=s(36322),P=s(28663),A=s(41664),L=s.n(A);let B=e=>{let{entryUUID:t}=e,s=[{text:"Not discoverable",icon:a.Aq,label:"Only people with a link can see this and share this"}];return(0,n.jsx)(r.GV,{items:s,children:(0,n.jsx)(r.zx,{size:"small",icon:a.Aq,onClick:()=>r.zW.discoverabilitiyButtonClick(t)})})},I=d.memo(e=>{let{visible:t,tweetDescriptionText:s,entryUUID:l}=e,i=(0,r.f3)(),[a,o]=(0,d.useState)("");(0,d.useEffect)(()=>{""===a&&o(window.location.href)},[a]),(0,d.useEffect)(()=>{let e=()=>o(window.location.href);return window.addEventListener(r.rE,e),()=>window.removeEventListener(r.rE,e)},[o]);let u=(0,d.useMemo)(()=>encodeURIComponent(i?(0,r.RP)(decodeURIComponent(a),"t"):""),[a,i]),x=(0,d.useMemo)(()=>null!=s?"Perplexity AI: ".concat(s):"Perplexity AI",[s]),m=(0,d.useMemo)(()=>c()("transition-all duration-300 opacity flex items-center gap-x-xs md:gap-x-0",{"opacity-0":!t,"opacity-100":t}),[t]);return(0,n.jsx)("div",{className:m,children:t&&(0,n.jsx)(r.xt,{descriptionText:x,entryUUID:l,shareURL:u})})}),W=d.memo(e=>{let{tweetDescriptionText:t,entryUUID:s}=e,l=(0,C.useRouter)(),i=(0,x.v9)(k.qc),o=(0,F.D)(),c=(0,d.useCallback)(()=>{r.zW.clickBackButton(!0)},[]),u=(0,d.useCallback)(()=>{r.zW.clickLogo(!0)},[]),m=(0,d.useCallback)(()=>{r.zW.deleteThreadFromSearchResultPageClick(s),o.deleteThread(null!=s?s:"",()=>l.push("/"))},[s,l,o]),h=(0,P.W)();return(0,n.jsx)(r.xu,{variant:"background",className:"py-sm px-md fixed left-0 md:left-sideBarWidth 2xl:left-sideBarWidthXL right-0 top-0 md:mb-0 z-10",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{className:"hidden md:block",children:(0,n.jsx)(T,{searchFocus:i.searchFocus})}),(0,n.jsxs)("div",{className:"flex items-center gap-x-sm md:hidden",children:[(0,n.jsx)(L(),{href:"/",onClick:u,children:(0,n.jsx)(r.cN,{isPro:h})}),(0,n.jsx)(r.zx,{variant:"common",size:"small",text:"New",icon:a.r8p,href:"/",onClick:c})]}),(0,n.jsxs)("div",{className:"flex items-center gap-x-sm",children:[i.rwToken&&(0,n.jsx)("div",{className:"-mr-xs",children:(0,n.jsx)(r.GV,{items:[{icon:a.XAH,text:"Delete",onClick:m}],children:(0,n.jsx)(r.Av,{size:"small",icon:a.S6C})})}),(0,n.jsx)(B,{entryUUID:s}),(0,n.jsx)(I,{visible:!0,tweetDescriptionText:t,entryUUID:s})]})]})})}),D=e=>{let{parentInfo:t}=e;return(0,n.jsx)(L(),{href:"/search/".concat(t.backend_uuid),target:"_blank",children:(0,n.jsxs)(r.xu,{bgHover:"offset",className:"border rounded-md px-md py-sm mb-md",children:[(0,n.jsxs)(r.RT,{color:"light",variant:"tiny",className:"flex items-center gap-x-xs",children:[(0,n.jsx)(R.G,{icon:a.MDP}),(0,n.jsx)("div",{children:"Follow up to"})]}),(0,n.jsx)(r.RT,{variant:"section-title",color:"light",className:"line-clamp-1 break-all",children:t.query_str}),t.author_username&&(0,n.jsx)("div",{className:"mt-xs",children:(0,n.jsx)(z.Z,{username:t.author_username,showAvatar:!0,textColor:"light",image:t.author_image})})]})})},M=e=>{var t,s;let{results:l}=e,a=(0,x.v9)(k.qc).searchFocus,{data:o}=(0,u.useSession)();l=null!=l?l:[];let z=(0,r.xc)(),E=(0,C.useRouter)(),R=(0,g.T)(),U=(0,d.useContext)(r.Vw),F=(0,r.dD)(!0),{feedbackEnabled:P}=(0,j.z)(),A=(0,d.useRef)(null);(0,d.useRef)(null);let[L,B]=(0,d.useState)(99999),[I,M]=(0,d.useState)(),q=(0,w.X)(),O=q.get("q"),Z=(0,x.v9)(k.x5),G=(0,x.v9)(k.Tw),$=(0,x.v9)(k.qc),V=(0,d.useMemo)(()=>!$.rwToken&&(0,r.vl)(Z),[Z,$.rwToken]),X=(0,x.v9)(b.Wf),H=(0,f.N)({submitCallback:(0,d.useCallback)(e=>{if(null==e?void 0:e.backend_uuid){let t="/search/".concat(null==e?void 0:e.backend_uuid,"?s=u"),s=history.state,n=window.location.pathname+window.location.search;history.replaceState({...s,url:n},"",t),window.dispatchEvent(r.PB)}},[])}),Q=(0,d.useCallback)(e=>{H({fork:V,rawQuery:e,copilotOverride:!!o&&void 0})},[H,V,o]),{setUserInput:Y,...J}=(0,v.Z)({clearInputOnSubmit:!0,onSubmit:Q}),K=()=>{if(r.zW.deleteLastResult(),Z.length<=1){E.push("/");return}R((0,y.H)({socket:U})).unwrap().then(e=>{let t="/search/".concat(null==e?void 0:e.backend_uuid,"?s=u");history.replaceState(null,"",t),window.dispatchEvent(r.PB)})},ee=(0,d.useCallback)(e=>{H(e)},[H]);(0,d.useEffect)(()=>M(new ResizeObserver(e=>{B(e[0].contentRect.height)})),[]),(0,d.useEffect)(()=>{null!=A.current&&(null==I||I.observe(A.current))},[I]),function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=(0,d.useContext)(r.Vw),n=(0,g.T)(),l=(0,w.X)(),a=l.get("q"),o=l.get("copilot"),c=l.get("focus"),u=(0,d.useRef)(!1),x=l.get("s"),m=(0,d.useCallback)(()=>u.current=!0,[]),h=(0,d.useCallback)(()=>setTimeout(()=>u.current=!1,200),[]);(0,d.useEffect)(()=>{t&&null!==s&&a&&!u.current&&(m(),n((0,k.iM)([])),null!=c&&c in r.ce&&n((0,i.P5)(c)),null!=o&&n((0,i.ZL)("true"===o)),e({rawQuery:Array.isArray(a)?a[0]:a,rawSource:(Array.isArray(x)?x[0]:x)||void 0,searchFocusOverride:null!=c?c:void 0,copilotOverride:null!=o?"true"===o:null}),h())},[s])}(H,0==l.length),(0,d.useEffect)(()=>()=>{R((0,k.iM)([]))},[R]);let et=Z.length>0?Z:[r.QI];(0,d.useEffect)(()=>{l.length>0&&R((0,k.iM)(l))},[]),(0,d.useEffect)(()=>()=>{R((0,i.ZL)(X)),R((0,i.P5)(r.ce.internet))},[R,X]),(0,d.useEffect)(()=>{""!=O&&Y("")},[O,Y]);let es=(0,d.useCallback)(e=>{e.state&&e.state.url&&(history.replaceState(null,"",e.state.url),window.dispatchEvent(r.PB))},[]);(0,d.useEffect)(()=>(window.addEventListener("popstate",es),()=>{window.removeEventListener("popstate",es)}),[es]);let en=(0,d.useMemo)(()=>{try{let e=(0,r.cW)(Z[Z.length-1]);return null!=e&&"FINAL"!==e[e.length-1].step_type}catch(e){return!1}},[Z]),el=(0,d.useMemo)(()=>{var e,t;return Z&&(null===(e=Z[Z.length-1])||void 0===e?void 0:e.status)!=="completed"&&(null===(t=Z[Z.length-1])||void 0===t?void 0:t.backend_uuid)!==void 0&&G},[Z,G]),ei=(0,d.useCallback)(()=>{U.emit("perplexity_terminate",{backend_uuid:Z[Z.length-1].backend_uuid})},[Z,U]);return(0,n.jsxs)(_.Z,{mobileDefaultHeader:!1,childrenPadding:!1,showFooter:!1,children:[(0,n.jsx)(S.u,{initialResults:l}),(0,n.jsx)(W,{entryUUID:null===(t=Z[0])||void 0===t?void 0:t.backend_uuid,tweetDescriptionText:null==Z?void 0:null===(s=Z[0])||void 0===s?void 0:s.query_str}),(0,n.jsx)("div",{className:c()("min-h-[100vh] flex flex-col pt-[56px] pb-[124px]"),children:(0,n.jsx)("div",{children:(0,n.jsxs)(r.xu,{variant:"background",className:"items-center w-full h-full md:mx-auto max-w-screen-md g",children:[$.parent_info&&z&&(0,n.jsx)(D,{parentInfo:$.parent_info}),(0,n.jsx)("div",{className:"md:hidden mb-sm",children:(0,n.jsx)(T,{searchFocus:a})}),(0,n.jsx)(h,{title:$.title,contextUUID:$.contextUUID,rwToken:$.rwToken}),(0,n.jsx)("div",{className:"",children:(0,n.jsx)("div",{ref:A,children:et.map((e,t)=>{var s,l,i;let a=t===et.length-1;return(0,n.jsx)(d.Fragment,{children:(0,n.jsx)(p,{fallback:(0,n.jsx)(r.o,{description:null!==(s=null==e?void 0:e.text)&&void 0!==s?s:"Please try again later."}),children:(0,n.jsx)(r.UL,{inFlight:G,isReadonly:V,threadMetadata:$,result:e,submit:H,onRelatedButtonClick:ee,isLastResult:a,isFirstResult:0===t,deleteLast:a&&1!==et.length?K:void 0,onResultProgress:e=>{R((0,k._Y)({response:e}))},showSurvey:P})})},null!==(i=null!==(l=null==e?void 0:e.uuid)&&void 0!==l?l:null==e?void 0:e.backend_uuid)&&void 0!==i?i:t)})})}),(0,n.jsx)("div",{id:r.XF}),(0,n.jsxs)(r.xu,{variant:F?"background":"transparent",className:c()("z-10 border-t md:border-none bottom-0 md:pb-lg py-sm left-0 right-0 fixed md:left-sideBarWidth 2xl:left-sideBarWidthXL min-[2500px]:left-0  justify-center px-sm md:p-0 animate-in slide-in-from-bottom-4 duration-300 ease-out",{hidden:V&&!z||en}),children:[(0,n.jsx)(m,{...J,isFollowUp:!0,disabled:G,placeholder:r.XS,submitWillFork:V,showStopButton:el,onStopButtonClick:ei}),(0,n.jsx)("div",{className:"md:hidden",children:(0,n.jsx)(N.Z,{})})]})]})})})]})}},44195:function(e,t,s){var n=s(85893),l=s(33729),i=s(99603);s(67294);let r=e=>{let{textVariant:t="baseSemi",textColor:s="default",searchFocus:r}=e;return r!=l.ce.internet&&null!=l.o$[r]?(0,n.jsx)(l.xu,{children:(0,n.jsxs)(l.RT,{variant:t,color:s,className:"flex items-center gap-x-xs",children:[(0,n.jsx)(i.G,{size:"1x",icon:l.o$[r].icon}),(0,n.jsx)("div",{children:l.o$[r].text})]})}):null};t.Z=r},13967:function(e,t,s){var n=s(85893),l=s(33729),i=s(93024),r=s(33299),a=s(67294),o=s(96113);let c=e=>{let{}=e,{data:t}=(0,r.useSession)(),[s,c]=(0,a.useState)(!1),u=(0,l.HM)(),d=(0,l.Vm)(),x=(0,l.w8)();return t?null:(0,n.jsxs)("div",{className:"flex items-center gap-x-sm pt-sm",children:[d&&(0,n.jsx)(l.zx,{fullWidth:!0,text:"Get iPhone App",variant:"primary",size:"small",href:l.PQ,icon:i.Av$}),x&&(0,n.jsx)(l.zx,{fullWidth:!0,text:"Get Android App",variant:"primary",size:"small",href:l.gG,icon:i.usd}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.zx,{variant:u?"common":"primary",fullWidth:!0,size:"small",text:"Sign Up",onClick:()=>c(!0)}),(0,n.jsx)(l.zx,{size:"small",variant:"common",fullWidth:!0,text:"Sign In",onClick:()=>c(!0)}),(0,n.jsx)(o._,{isOpen:s,onClose:()=>c(!1)})]})]})};t.Z=c}}]);
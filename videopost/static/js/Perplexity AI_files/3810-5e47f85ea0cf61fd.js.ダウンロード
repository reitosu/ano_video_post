"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3810],{26390:function(e,l,s){var t=s(85893),n=s(96113),i=s(67877),a=s(32061),r=s(90265),o=s(37414),c=s(58917),d=s(37122),u=s(33729),m=s(65820),x=s(33299),h=s(11163),v=s(67294),p=s(9473),f=s(66991);let g=e=>{let{isOpen:l,onOpen:s,onClose:g,children:j}=e,b=(0,h.useRouter)(),{data:k}=(0,x.useSession)(),y=(0,p.v9)(o.Du),w=(0,c.T)(),C=(0,i.T)(),[N,_]=(0,v.useState)(!1),S=(0,u.KJ)(),T=void 0!==l,z=T?l:N,R=(0,r.N)({submitCallback:(0,v.useCallback)(e=>{if(null==e?void 0:e.backend_uuid){let l="/search/".concat(null==e?void 0:e.backend_uuid,"?s=u");history.replaceState(null,"",l),window.dispatchEvent(u.PB)}},[])}),P=(0,v.useCallback)(()=>{z||(null==s||s(),T||_(!0))},[s,T,z]);(0,v.useCallback)(()=>{z&&(null==g||g(),T||_(!1))},[g,T,z]);let{isAuthModalOpen:W,setIsAuthModalOpen:I,isPricingModalOpen:E,setIsPricingModalOpen:A,...Z}=(0,a.Z)({clearInputOnSubmit:!0,onSubmit:e=>{w((0,d.iM)([])),-1!==b.asPath.indexOf("/search?q")&&R({rawQuery:e,forceNew:!0}),T||_(!1),null==g||g()}}),L=(0,v.useCallback)(e=>{(e.metaKey||e.ctrlKey)&&e.key===(S?"k":"i")?(e.preventDefault(),u.zW.quickAskKeyboardShortcut(),T||_(!0),null==s||s()):"Escape"===e.key&&(T||_(!1),null==g||g())},[g,s,T,S]);(0,v.useEffect)(()=>(document.addEventListener("keydown",L),()=>{document.removeEventListener("keydown",L)}),[L]);let F=(0,v.useCallback)(()=>{T||_(!1),null==g||g()},[g,T]);(0,v.useEffect)(()=>{z||Z.onClear()},[Z,z]);let M=(0,v.useCallback)(e=>{e.stopPropagation()},[]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{onClick:P,children:j}),(0,t.jsx)(u.aV,{isOpen:z,canOutsideClickClose:!0,onClose:F,children:(0,t.jsx)(m.M,{children:z&&(0,t.jsx)("div",{className:"animate-in fade-in zoom-in-95 duration-300",onClick:M,children:(0,t.jsxs)(u.xu,{variant:"offset",className:"max-w-screen-md min-w-[790px] w-[50vw] p-lg rounded-xl shadow-md relative",children:[(0,t.jsx)(u.nj,{defaultTall:!0,...Z,selectedFocus:y,setSelectedFocus:e=>{"wolfram"!==e||k?w((0,o.P5)(e)):I(!0)},showFocuses:!0,showPowerToggle:!0,showAutosuggestions:C}),(0,t.jsx)(n._,{isOpen:W,onClose:()=>I(!1)}),(0,t.jsx)(f.Z,{isOpen:E,onClose:()=>A(!1)})]})})})})]})};l.Z=g},96113:function(e,l,s){s.d(l,{_:function(){return d}});var t=s(85893),n=s(33729),i=s(67294),a=s(93024),r=s(33299);let o=e=>{let{onClose:l,redirectUrl:s}=e,[o,c]=i.useState(""),[d,u]=i.useState(),m=(0,i.useMemo)(()=>o.length>0&&o.includes("@")&&o.includes(".")&&o.indexOf("@")<o.lastIndexOf(".")&&o.indexOf("@")>0,[o]),x=(0,i.useCallback)(()=>{m?((0,r.signIn)("email",{email:o,callbackUrl:s}),l()):u("Please enter a valid email address")},[o,m,l,s]),h=(0,i.useCallback)(e=>{"Enter"===e.key&&x()},[x]);return(0,t.jsx)("div",{className:"flex h-full items-center md:block",children:(0,t.jsxs)("div",{className:"grow",children:[(0,t.jsx)(n.RT,{variant:"display",color:"super",className:"text-center",children:"Welcome"}),(0,t.jsx)(n.RT,{variant:"section-title",color:"light",className:"text-center mt-sm",children:"Sign in or sign up to continue"}),(0,t.jsxs)("div",{className:"max-w-sm mx-auto mt-lg",children:[(0,t.jsxs)("div",{className:" space-y-sm",children:[(0,t.jsx)(n.zx,{fullWidth:!0,pill:!0,icon:a.xYR,text:"Continue with Google",onClick:()=>(0,r.signIn)("google",{callbackUrl:s})}),(0,t.jsx)(n.zx,{pill:!0,fullWidth:!0,icon:a.Av$,text:"Continue with Apple",onClick:()=>(0,r.signIn)("apple",{callbackUrl:s})})]}),(0,t.jsxs)(n.xu,{className:"border-t mt-md pt-md space-y-sm",children:[(0,t.jsx)(n.II,{type:"email",errorText:d,placeholder:"henry@example.com",value:o,onKeyDown:h,onChange:e=>c(e.target.value)}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(n.Av,{pill:!0,size:"small",text:"Continue with Email",onClick:x})})]})]})]})})},c=[],d=i.memo(e=>{let{isOpen:l,redirectUrl:s,onClose:i}=e;return(0,t.jsx)(n.u_,{isOpen:l,onClose:i,actionList:c,children:(0,t.jsx)(o,{onClose:i,redirectUrl:s})})})},54522:function(e,l,s){var t=s(85893),n=s(33729),i=s(94184),a=s.n(i);s(67294);let r=e=>{let{actionList:l,size:s=n.$u.regular,variant:i="primary",fillSpace:r,vertical:o}=e,c=a()("items-center relative ",{"space-y-sm":o,"gap-x-xs flex h-full w-fit":!o,"w-full":r}),d=a()("relative items-center gap-x-sm",{"h-full ":!o,"w-full px-two flex justify-center":r});return(0,t.jsx)("div",{className:c,children:l.map(e=>{var l;return e.show?(0,t.jsxs)("div",{className:d,children:[(0,t.jsx)(n.Y6,{vertical:o,text:e.text,size:s,variant:i,fullWidth:r,active:e.active,icon:e.icon,onClick:e.onClick,href:e.href}),e.badge&&(0,t.jsx)(n.RT,{className:"pointer-events-none absolute right-0 pl-sm rounded-l-full p-xs bg-super text-white top-sm",variant:"tiny",children:e.badge})]},null!==(l=e.key)&&void 0!==l?l:e.text):null})})};l.Z=r},43810:function(e,l,s){s.d(l,{Z:function(){return I}});var t=s(85893),n=s(37605),i=s(38671),a=s(33729),r=s(99603),o=s(87072),c=s(41664),d=s.n(c),u=s(67294);let m=u.memo(()=>{let[e,l]=(0,u.useState)(!1);(0,u.useEffect)(()=>{let e=(0,i.ej)("trackingAllowed");!e&&(0,n.i)()&&l(!0)},[]);let s=(0,u.useCallback)(()=>{(0,i.d8)("trackingAllowed","true",{expires:365}),window.dispatchEvent(new CustomEvent("consentChange",{detail:{consent:"ALLOW"}})),l(!1)},[]),c=(0,u.useCallback)(()=>{(0,i.d8)("trackingAllowed","false",{expires:365}),l(!1)},[]);return e&&(0,t.jsxs)(a.xu,{variant:"background",className:"fixed bottom-sm left-sm md:left-auto right-sm p-md border rounded-lg shadow-sm z-50 max-w-md",children:[(0,t.jsxs)(a.RT,{variant:"baseSemi",className:"flex items-center gap-x-sm",children:[(0,t.jsx)(r.G,{icon:o.B1z}),(0,t.jsx)("span",{children:"Cookie Policy"})]}),(0,t.jsxs)(a.RT,{variant:"small",color:"light",className:"text-sm mb-4",children:['We use cookies to enhance your experience. By clicking "Accept All Cookies" or selecting "Necessary Cookies", you agree to our'," ",(0,t.jsx)(d(),{href:"/privacy",className:"underline",children:"privacy policy"}),"."]}),(0,t.jsxs)(a.xu,{className:"flex items-center gap-x-sm",children:[(0,t.jsx)(a.zx,{size:"small",variant:"primary",onClick:s,text:"Accept All Cookies"}),(0,t.jsx)(a.zx,{size:"small",onClick:c,text:"Necessary Cookies"})]})]})});var x=s(94184),h=s.n(x),v=s(28663);let p=u.memo(e=>{let{}=e;(0,a.dD)();let l=(0,u.useCallback)(()=>{a.zW.clickBackButton(!0)},[]),s=(0,u.useCallback)(()=>{a.zW.clickLogo(!0)},[]),n=(0,v.W)();return(0,t.jsx)(a.xu,{variant:"background",className:"py-sm px-md fixed left-0 right-0 top-0 md:mb-0 z-10 w-full",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-x-sm md:hidden",children:[(0,t.jsx)(d(),{href:"/",onClick:s,children:(0,t.jsx)(a.TR,{isPro:n,size:"small"})}),(0,t.jsx)(a.zx,{variant:"primary",size:"small",text:"New",icon:o.r8p,href:"/",onClick:l})]})})});var f=s(93024);let g=e=>{let{}=e,l=[{text:"iOS App",icon:f.Av$,href:"/iphone"},{text:"Android App",icon:f.usd,href:"/android"},{text:"Chrome Default Search",target:"_blank",icon:o.Y$T,href:"https://chrome.google.com/webstore/detail/perplexity-ai-search/bnaffjbjpgiagpondjlnneblepbdchol"},{text:"Chrome AI Companion",target:"_blank",icon:o.NxF,href:"https://chrome.google.com/webstore/detail/perplexity/hlgbcneanomplepojfcnclggenpcoldo/"}];return(0,t.jsx)(a.GV,{items:l,children:(0,t.jsx)(a.Av,{pill:!0,size:"small",icon:o.$SY,text:"Download"})})},j=e=>{let{}=e;return(0,t.jsxs)("div",{children:[(0,t.jsxs)(a.xu,{className:"flex items-center gap-x-xs mb-sm px-sm border-b py-sm",children:[(0,t.jsx)(g,{}),(0,t.jsx)(a.Av,{size:a.$u.small,icon:f.mdU,target:"_blank",pill:!0,href:"https://twitter.com/perplexity_ai"}),(0,t.jsx)(a.Av,{pill:!0,size:a.$u.small,icon:f.omb,target:"_blank",href:"https://discord.gg/perplexity-ai"})]}),(0,t.jsx)(a.xu,{className:"flex flex-wrap gap-x-sm gap-y-xs px-sm pb-[58px] md:pb-0",children:[{title:"Pro",href:"/pro"},{title:"About",href:"/about"},{title:"Blog",href:"/blog"},{title:"Privacy Policy",href:"/privacy"},{title:"Terms of Service",href:"/tos"}].map(e=>(0,t.jsx)(u.Fragment,{children:(0,t.jsx)(d(),{href:e.href,children:(0,t.jsx)(a.RT,{variant:"tiny",color:"light",className:"hover:underline",children:e.title})})},e.title))})]})};var b=s(26390),k=s(96113),y=s(17073);let w=e=>{let{}=e,l=(0,v.W)(),[s,n]=(0,u.useState)(!1);return l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.xu,{variant:"background",className:"border rounded-md p-md flex items-center gap-x-sm hover:border-super trantiion duration-300 cursor-pointer",onClick:()=>n(!0),children:[(0,t.jsx)(a.RT,{variant:"small",color:"super",children:(0,t.jsx)(r.G,{icon:o.Cly})}),(0,t.jsx)(a.RT,{children:(0,t.jsxs)(a.RT,{variant:"smallBold",className:"inline-block",children:["Give $10, get $10 for"," ",(0,t.jsx)(a.RT,{color:"super",className:"inline-block",variant:"smallBold",children:"Pro"})]})})]}),(0,t.jsx)(y.Z,{isOpen:s,onClose:()=>n(!1)})]}):null};var C=s(25159);let N=e=>{let{}=e,l=(0,v.W)();return l?null:(0,t.jsxs)(a.xu,{variant:"background",className:"rounded-lg py-sm px-md border",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(a.RT,{className:"inline",variant:"section-title",children:"Try"}),(0,t.jsxs)(a.RT,{className:"inline",variant:"section-title",color:"super",children:[" ","Pro"," "]})]}),(0,t.jsx)(a.RT,{color:"light",variant:"small",children:"Perplexity Pro gives you more Copilot uses and GPT-4 access."}),(0,t.jsx)("div",{className:"mt-sm -ml-sm",children:(0,t.jsx)(C.Z,{text:"Learn More"})})]})};var _=s(24054),S=s(14181),T=s(33299),z=s(11163),R=s(54522);let P=e=>{let{minimalLogo:l}=e,s=(0,z.useRouter)(),[n,i]=(0,u.useState)(!1),{data:r}=(0,T.useSession)();(0,a.FF)(!0);let c=(0,a.KJ)(),m=(0,v.W)(),x=(0,u.useMemo)(()=>{let e=s.pathname;return[{icon:o.Xgz,text:"Popular",href:"/",show:!0,active:"/"===e},{icon:o.Krp,text:"Threads",href:r?"/threads":void 0,onClick:()=>{r||i(!0),a.zW.yourThreadsClick(null!=r)},show:!0,active:e.startsWith("/threads")},{icon:o.bpC,text:"AI Profile",href:r?"/profile":void 0,show:!0,onClick:()=>{r||i(!0),a.zW.yourThreadsClick(null!=r)},active:e.startsWith("/profile")},{icon:o.BEY,text:"Login",onClick:()=>{a.zW.loginClick(),i(!0)},show:!r,active:e.startsWith("/login")}]},[r,s.pathname]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.xu,{variant:"offset",className:"h-full fixed w-sideBarWidth 2xl:w-sideBarWidthXL border-r z-20 border-t border-b",children:(0,t.jsxs)("div",{className:"pt-lg pb-sm sticky top-0 flex justify-between flex-col h-full",children:[(0,t.jsxs)("div",{className:"grow",children:[(0,t.jsx)(d(),{href:"/",className:"pl-md mb-lg block ",children:l?(0,t.jsx)(a.cN,{isPro:m,width:"w-6"}):(0,t.jsx)(a.TR,{isPro:m,size:"small"})}),(0,t.jsx)("div",{className:"mb-md",children:(0,t.jsx)(b.Z,{children:(0,t.jsxs)(a.xu,{variant:"background",className:"border rounded-full pl-md pr-sm py-sm flex justify-between items-center ml-md mr-md mt-md cursor-pointer group ring-2 ring-transparent hover:border-white hover:!ring-super transition duration-300",children:[(0,t.jsx)(a.RT,{variant:"smallBold",color:"light",children:"New Thread"}),(0,t.jsxs)(a.RT,{color:"light",variant:"tiny",className:"flex items-center space-x-two",children:[(0,t.jsx)(a.xu,{className:" rounded-md min-w-5 h-5 flex items-center px-xs justify-center border",children:c?"âŒ˜":"Ctrl"}),(0,t.jsx)(a.xu,{className:"font-mono rounded-md w-5 h-5 flex items-center justify-center border",children:c?"K":"I"})]})]})})}),(0,t.jsx)("div",{className:"",children:(0,t.jsx)(R.Z,{vertical:!0,actionList:x})}),(0,t.jsx)("div",{className:"ml-md mt-md mr-md",children:!r&&(0,t.jsx)(a.zx,{variant:"primary",pill:!0,fullWidth:!0,text:"Sign Up",onClick:()=>{a.zW.signupClick(),i(!0)}})})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("div",{className:"px-sm pb-sm",children:(0,t.jsx)(w,{})}),(0,t.jsx)("div",{className:"px-sm pb-sm",children:(0,t.jsx)(N,{})}),r&&(0,t.jsx)(d(),{href:"/settings",children:(0,t.jsx)(a.xu,{className:"px-sm py-sm border-b",children:(0,t.jsxs)(a.xu,{bgHover:"offsetPlus",className:"flex py-xs pl-sm pr-sm items-center rounded-full gap-x-sm",children:[(0,t.jsx)(_.Z,{size:"medium",user:r.user.image}),(0,t.jsxs)("div",{children:[(0,t.jsx)(S.Z,{username:r.user.username}),(0,t.jsx)(a.RT,{variant:"small",color:"light",children:"Settings"})]})]})})}),(0,t.jsx)(j,{})]})]})}),(0,t.jsx)(k._,{isOpen:n,onClose:()=>i(!1)})]})},W=e=>{let{mobileDefaultHeader:l=!0,showFooter:s=!0,showSidebar:n=!0,minimalLogo:i,children:r,childrenWidth:o="default",childrenPadding:c=!0}=e;return(0,t.jsxs)("div",{className:"md:pb-0",children:[(0,t.jsxs)("div",{className:"flex min-h-[100vh]",children:[n&&(0,t.jsx)(a.xu,{className:"hidden md:block min-[2500px]:fixed flex-none w-sideBarWidth 2xl:w-sideBarWidthXL",children:(0,t.jsx)(P,{minimalLogo:i})}),(0,t.jsxs)("div",{className:"grow",children:[l&&(0,t.jsx)("div",{className:"md:hidden pt-[48px]",children:(0,t.jsx)(p,{})}),(0,t.jsx)("div",{className:"md:flex justify-center h-full px-md ",children:(0,t.jsx)("div",{className:h()("w-full mx-auto",{"max-w-screen-sm md:px-lg":"small"===o,"max-w-screen-md md:px-lg":"default"===o,"max-w-screen-lg md:px-xl":"static"===o,"py-lg":c}),children:r})})]})]}),s&&(0,t.jsx)(a.xu,{variant:"offset",className:"md:hidden py-sm px-sm",children:(0,t.jsx)(j,{})}),(0,t.jsx)(m,{})]})};var I=W},17241:function(e,l,s){var t=s(85893),n=s(33729),i=s(28663),a=s(99603),r=s(87072),o=s(33299),c=s(9008),d=s.n(c),u=s(11163),m=s(67294),x=s(96113);let h=m.memo(e=>{let{referralCode:l}=e,[s,c]=(0,m.useState)(l),h=(0,n.f3)(),v=(0,u.useRouter)(),p=(0,m.useContext)(n.Vw),{data:f}=(0,o.useSession)(),g=(0,i.W)(),[j,b]=(0,m.useState)(!1),k=[{name:"More Copilot uses",sub:"Copilot is your personal AI search assistant (300+ uses per day)",icon:r.vqe},{name:"Access the best AI models",sub:"Choose GPT-4 for all questions",icon:r.N6K},{name:"Future Pro features",sub:"New capabilities will be added at no extra cost",icon:r.cHW},{name:"Pro support",sub:"Private Discord channel with other Pro users and employees",icon:r.i7y}],y=(0,m.useCallback)(e=>{g?v.push("/"):null!=f?p.emit("get_checkout_session",{tier:e,code:s},e=>{(null==e?void 0:e.url)?window.location.href=e.url:"subscribed"===e.status&&v.reload()}):b(!0)},[g,s,v,f,p]);return(0,m.useEffect)(()=>{let e=localStorage.getItem("referral_code_expiry"),l=localStorage.getItem("referral_code");void 0===s&&e&&new Date(e)>new Date?c(l):e&&new Date(e)<new Date&&(localStorage.removeItem("referral_code"),localStorage.removeItem("referral_code_expiry"))},[s]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d(),{children:(0,t.jsx)("script",{async:!0,src:"https://js.stripe.com/v3/pricing-table.js"})}),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-lg",children:[k.map((e,l)=>(0,t.jsxs)("div",{className:"flex items-baseline gap-x-md",children:[(0,t.jsx)(n.RT,{color:"super",children:(0,t.jsx)(a.G,{size:"lg",fixedWidth:!0,icon:e.icon})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.RT,{variant:"baseSemi",children:e.name}),(0,t.jsx)(n.RT,{variant:"small",color:"light",children:e.sub})]})]},l)),[{cost:20,name:"Monthly",billed:"per month",url:"",tier:"monthly"},{cost:200,name:"Yearly",billed:"per year",url:"",badge:"Save $40 a year",note:"7 day free trial",tier:"yearly"}].map((e,l)=>(0,t.jsxs)(n.xu,{className:"p-md border rounded-md flex flex-col mt-md",children:[(0,t.jsxs)("div",{className:"flex-grow",children:[(0,t.jsxs)("div",{className:"relative mb-sm",children:[(0,t.jsx)(n.RT,{variant:"smallCaps",color:"super",children:e.name}),e.badge&&(0,t.jsx)(n.xu,{variant:"offset",className:"px-sm py-two rounded-full absolute right-0 -top-xs",children:(0,t.jsx)(n.RT,{variant:"tiny",children:e.badge})})]}),(0,t.jsx)(n.RT,{variant:"section-title",children:"$".concat(e.cost)}),(0,t.jsxs)(n.RT,{variant:"small",color:"light",className:"mb-md",children:["billed ",e.billed]})]}),(0,t.jsxs)("div",{children:[e.note&&(0,t.jsxs)(n.RT,{variant:"tiny",color:"super",className:"mb-sm",children:[(0,t.jsx)("span",{className:"mr-xs",children:(0,t.jsx)(a.G,{icon:r.Cly})}),(0,t.jsx)("span",{children:e.note})]}),(0,t.jsx)("div",{className:"items-center gap-md",children:(0,t.jsx)(n.zx,{variant:"primary",text:"Get Started",fullWidth:!0,onClick:()=>y(e.tier)})})]})]},l)),s&&!g&&(0,t.jsxs)(n.xu,{className:"col-span-2 flex items-center p-md rounded-lg gap-x-sm",variant:"offset",children:[(0,t.jsx)(a.G,{icon:r.I1I,className:"text-super"}),(0,t.jsx)(n.RT,{variant:"baseSemi",children:"$10 referral discount applied."})]}),(0,t.jsx)(x._,{isOpen:j,redirectUrl:null!=s&&h?window.location.href:"",onClose:()=>b(!1)})]})})]})});l.Z=h},66991:function(e,l,s){var t=s(85893),n=s(33729),i=s(67294),a=s(17241);let r=i.memo(e=>{let{isOpen:l,onClose:s}=e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(n.u_,{isOpen:l,onClose:s,children:[(0,t.jsx)("div",{className:"p-lg",children:(0,t.jsx)("div",{className:"flex items-center justify-center mb-lg",children:(0,t.jsx)(n.TR,{isPro:!0})})}),(0,t.jsx)(a.Z,{})]})})});l.Z=r},17073:function(e,l,s){var t=s(85893),n=s(33729),i=s(99603),a=s(87072);s(67294);var r=s(96740);let o=e=>{let{isOpen:l,onClose:s}=e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(n.u_,{isOpen:l,onClose:s,children:(0,t.jsxs)("div",{className:"p-lg space-y-lg",children:[(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)(i.G,{className:"text-super",icon:a.Cly,size:"3x"})}),(0,t.jsxs)("div",{className:"text-center space-y-sm",children:[(0,t.jsxs)(n.RT,{variant:"page-title",children:["Who do you know that would love",(0,t.jsx)("span",{className:"text-super",children:" Pro"}),"?"]}),(0,t.jsx)(n.RT,{variant:"section-title",color:"light",children:"Refer a friend and you both get a discount. Give $10, get $10."})]}),(0,t.jsx)(r.Z,{})]})})})};l.Z=o},96740:function(e,l,s){var t=s(85893),n=s(12022),i=s(33729),a=s(87072),r=s(67294),o=s(9473);let c=e=>{let{}=e,l=(0,r.useContext)(i.Vw),[s,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(),[m,x]=(0,r.useState)(!1),[h,v]=(0,r.useState)(!1),p=(0,o.v9)(n.qb),f=(0,r.useMemo)(()=>"perplexity.ai/pro?referral_code=".concat(p),[p]),g=(0,r.useCallback)(()=>{if(!1===/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)){u("Please enter a valid email address");return}l.emit("send_referral_email",{to_email:s}),c(""),v(!0),setTimeout(()=>{v(!1)},2e3)},[s,l]);return(0,t.jsxs)("div",{className:"space-y-lg",children:[(0,t.jsx)("div",{className:"",children:(0,t.jsxs)("div",{className:"flex items-center gap-sm",children:[(0,t.jsx)("div",{className:"grow",onClick:()=>{m||(navigator.clipboard.writeText(f),x(!0),setTimeout(()=>{x(!1)},2e3))},children:(0,t.jsx)(i.II,{label:"Your Referral Link",value:f,resizable:!1,size:"large",disabled:!0,rightItems:[{type:"button",buttonProps:{size:"small",icon:m?a.LEp:a.kZ_,variant:m?"primary":void 0,disabled:m,onClick:()=>{m||(navigator.clipboard.writeText(f),x(!0),setTimeout(()=>{x(!1)},2e3))}}}]})}),(0,t.jsx)("div",{className:"mt-lg pt-xs",children:(0,t.jsx)(i.xt,{descriptionText:"Try Perplexity Pro with $10 off your first month: ",shareURL:"https://www.".concat(f)})})]})}),(0,t.jsx)("div",{className:"",children:(0,t.jsxs)("div",{className:"flex items-center gap-sm",children:[(0,t.jsx)("div",{className:"grow",children:(0,t.jsx)(i.II,{onKeyDown:e=>{"Enter"===e.key&&(g(),e.preventDefault())},value:s,onChange:e=>{c(e.target.value),u(void 0)},errorText:d,label:"Email Your Link",placeholder:"henry@example.com"})}),(0,t.jsx)("div",{className:"mt-lg pt-xs",children:(0,t.jsx)(i.zx,{variant:"primary",text:"Send",size:"small",icon:h?a.LEp:a.mNB,onClick:g})})]})}),(0,t.jsxs)(i.xu,{className:"pt-md border-t",children:[(0,t.jsx)(i.RT,{variant:"smallBold",className:"mb-xs",children:"How does it work?"}),(0,t.jsx)(i.RT,{color:"light",variant:"small",children:"For every Pro subscriber you refer, you get $10 off your next billing cycle and they get $10 off. You can refer as many people as you want, and discounts are automatically applied once per billing cycle."})]})]})};l.Z=c},25159:function(e,l,s){var t=s(85893),n=s(33729),i=s(75336),a=s(40435),r=s(28663),o=s(33299),c=s(11163),d=s(67294),u=s(96113),m=s(66991);let x=e=>{let{text:l="Learn more"}=e,s=(0,c.useRouter)(),x=(0,d.useContext)(n.Vw),h=(0,r.W)(),v=(0,n.Lv)(),p=(0,a.C0)(),{data:f}=(0,o.useSession)(),[g,j]=(0,d.useState)(!1),b=(0,d.useCallback)(()=>{x.emit("get_customer_portal",e=>{"success"===e.status&&null!=e.url&&""!==e.url?s.push(e.url):s.push(v||p?"https://billing.stripe.com/p/login/6oEeXaewnb3z1facMM":"https://billing.stripe.com/p/login/test_7sIdSS7ioeNSdpe9AA")})},[p,v,s,x]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:h?(0,t.jsx)(i.Z,{text:"Manage Pro",size:"small",onClick:b}):(0,t.jsx)(n.Av,{text:l,variant:"super",size:"small",onClick:()=>{j(!0)}})}),f?(0,t.jsx)(m.Z,{isOpen:g,onClose:()=>j(!1)}):(0,t.jsx)(u._,{isOpen:g,onClose:()=>j(!1)})]})};l.Z=x},24054:function(e,l,s){var t=s(85893),n=s(33729),i=s(99603),a=s(87072),r=s(94184),o=s.n(r),c=s(67294);let d=e=>{let{size:l="medium",user:s,showEdit:r,onChange:d,anon:u}=e,m="xs";"medium"===l?m="1x":"large"===l&&(m="2x");let x=(0,c.useCallback)(()=>{let e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=e=>{var l;let s=null===(l=e.target.files)||void 0===l?void 0:l[0];if(s){let e=new FileReader;e.onload=e=>{var l;d(null===(l=e.target)||void 0===l?void 0:l.result)},e.readAsDataURL(s)}},e.click()},[d]);return(0,t.jsx)("div",{className:"relative",children:(0,t.jsxs)(n.xu,{variant:"offsetPlus",className:o()("aspect-square rounded-full overflow-hidden flex items-center justify-center ",{"w-5":"small"===l,"w-9":"medium"===l,"w-[80px]":"large"===l}),children:[s&&!u?(0,t.jsx)("img",{alt:"User avatar",className:"w-full h-auto",src:s}):(0,t.jsx)(n.RT,{color:"light",children:(0,t.jsx)(i.G,{size:m,icon:u?a.BC0:a.ILF})}),r&&"small"!==l&&(0,t.jsx)("div",{className:"absolute bottom-0 right-0",children:(0,t.jsx)(n.zx,{size:"small",pill:!0,icon:a.Yai,onClick:x})})]})})};l.Z=d},14181:function(e,l,s){var t=s(85893),n=s(11238),i=s(33729),a=s(87072),r=s(33299),o=s(67294),c=s(88767),d=s(24054);let u=e=>{var l,s;let{showAvatar:u,showCreatorLabel:m,showEdit:x,isCurrentUser:h=!0,textColor:v,username:p,image:f,anon:g}=e,{data:j}=(0,r.useSession)(),[b,k]=o.useState(!1),[y,w]=o.useState(null!=p?p:h?null==j?void 0:null===(l=j.user)||void 0===l?void 0:l.username:"Unknown user"),[C,N]=o.useState(),{mutate:_,isLoading:S}=(0,c.useMutation)({mutationKey:"editUsername",mutationFn:()=>fetch("/api/user",{method:"PUT",body:JSON.stringify({username:y})}),onSuccess:e=>{e.json().then(l=>{if(200!==e.status){N(l.message);return}k(!1),N(void 0),(0,n.U)()})}});(0,o.useEffect)(()=>{var e;w(null!=p?p:h?null==j?void 0:null===(e=j.user)||void 0===e?void 0:e.username:"Unknown user")},[p,h,null==j?void 0:null===(s=j.user)||void 0===s?void 0:s.username]);let T="@perplexity-bot@"===y;return(0,t.jsxs)("div",{className:"flex items-center gap-x-xs relative",children:[u&&(0,t.jsx)(d.Z,{size:"small",anon:g,user:T?"/static/images/bot.png":null!=f?f:h?null==j?void 0:j.user.image:void 0}),b?(0,t.jsx)("div",{children:(0,t.jsx)(i.II,{value:y,disabled:S,errorText:null!=C?C:""===y?"Username cannot be empty":"",onChange:e=>w(e.target.value),className:"md:min-w-[300px]",inlineEditBlock:(0,t.jsxs)("div",{className:"flex items-center ml-sm gap-x-xs",children:[(0,t.jsx)(i.zx,{text:"Save",variant:y===j.user.username||""===y||S?"common":"primary",size:"small",disabled:y===j.user.username||""===y||S,onClick:()=>_()}),(0,t.jsx)(i.zx,{text:"Cancel",size:"small",disabled:S,onClick:()=>{w(j.user.username),k(!1)}})]})})}):(0,t.jsx)(i.RT,{variant:"smallBold",color:v,className:"line-clamp-1 break-all",children:g?"Anonymous":T?"Perplexity Bot":y}),m&&(0,t.jsx)(i.xu,{variant:"offset",className:"py-xs px-sm rounded-full",children:(0,t.jsx)(i.RT,{variant:"tiny",color:"light",children:"Author"})}),x&&!b&&(0,t.jsx)(i.Av,{pill:!0,size:"small",icon:a.Yai,onClick:()=>k(!0)})]})};l.Z=u},36322:function(e,l,s){s.d(l,{D:function(){return c}});var t=s(99611),n=s(37122),i=s(33729),a=s(67294),r=s(88767),o=s(9473);let c=e=>{var l,s,c;let[u,m]=(0,a.useState)(new Set([])),x=(0,o.v9)(n.qc),h=(0,r.useQueryClient)(),v=(0,a.useContext)(i.Vw),[p,f]=(0,a.useState)(0),g="list_ask_threads",j=(0,t.Z)(g,[{limit:20,offset:p,search_term:e}]),b=null!==(s=j.data)&&void 0!==s?s:[],k=null!==(c=null==b?void 0:null===(l=b[0])||void 0===l?void 0:l.total_threads)&&void 0!==c?c:0,y=d(k,p,f),w=(e,l)=>{if(!v){console.log("No socket connection");return}let s=s=>{(null==s?void 0:s.status)==="completed"?(m(l=>new Set([...l,e])),1===b.length&&p>0?(h.invalidateQueries({queryKey:[g]}),y.getPreviousPage()):j.refetch(),null==l||l()):(console.log("Problem with deleting thread:"),console.log(s))};v.emit("delete_thread_by_entry_uuid",e,{read_write_token:null==x?void 0:x.rwToken},s)},C=e=>{if(!v){console.log("No socket connection");return}let l=l=>{(null==l?void 0:l.status)==="completed"?(h.removeQueries({queryKey:[g]}),f(0),null==e||e()):(console.log("Problem with deleting thread:"),console.log(l))};v.emit("delete_all_threads",l)};return(0,a.useEffect)(()=>{f(0)},[e]),{...j,deleteThread:w,deleteAllThreads:C,paginationInfo:y,data:b,threads:b,deletedThreads:u}},d=(e,l,s)=>{let t=Math.ceil(e/20),n=Math.min(Math.ceil(l/20)+1,t);return{totalThreads:e,currentPage:n,totalPages:t,hasNextPage:n<t,hasPreviousPage:l>0,getNextPage:()=>s(l=>Math.min(l+20,(e-1)*20)),getPreviousPage:()=>s(e=>Math.max(e-20,0))}}},30385:function(e,l,s){var t=s(28663),n=s(37414),i=s(58917),a=s(12022),r=s(33729),o=s(33299),c=s(67294),d=s(9473);l.Z=function(e){let{clearInputOnSubmit:l=!1,initialValue:s="",onSubmit:u}=e,{data:m}=(0,o.useSession)(),x=(0,c.useContext)(r.Vw),h=(0,i.T)(),v=(0,d.v9)(n.ig),p=(0,d.v9)(n.$0),f=(0,t.W)(),g=(0,d.v9)(n.Du),j=(0,c.useRef)(null),[b,k]=(0,c.useState)(s),y=(0,c.useCallback)(()=>{null==u||u(b),l&&k("")},[l,u,b]),w=(0,c.useCallback)(e=>{(0,r.Wk)(e)&&!e.defaultPrevented&&(e.preventDefault(),y())},[y]),C=(0,c.useCallback)(()=>{var e;k(""),null===(e=j.current)||void 0===e||e.focus()},[]),N=(0,c.useCallback)(e=>{k(e)},[]),_=(0,c.useCallback)(()=>{y()},[y]),S=(0,c.useCallback)(e=>{h((0,n.P5)(e))},[h]),T=(0,c.useCallback)(e=>{h((0,n.ZL)(e)),h((0,a.GR)(e))},[h]);return(0,c.useEffect)(()=>{if(x){null==x||x.emit("get_rate_limit",{},e=>{var l;h((0,n.NF)(null!==(l=e.remaining)&&void 0!==l?l:0))});return}},[h,m,x]),{forwardedRef:j,value:b,selectedFocus:g,isCopilot:p,gpt4Limit:v,isSignedIn:null!=m,isPlus:f,setIsCopilot:T,setSelectedFocus:S,onChange:N,onKeyDown:w,onClear:C,onClick:_,setUserInput:k}}},67877:function(e,l,s){s.d(l,{T:function(){return n}});var t=s(89224);let n=()=>{let{autosuggestEnabled:e}=(0,t.z)();return null!=e&&e}},99611:function(e,l,s){s.d(l,{Z:function(){return a}});var t=s(33729),n=s(67294),i=s(88767);function a(e,l,s){var a;let r=(0,n.useContext)(t.Vw),o=(0,n.useMemo)(()=>l||[],[l]),c=(0,n.useMemo)(()=>null===(a=null==l?void 0:l.every(e=>null!=e))||void 0===a||a,[l]),d=(0,n.useCallback)(()=>new Promise((l,s)=>{if(!r){l([]);return}r.emit(e,...o,e=>{l(e)}),setTimeout(()=>{s(Error("Request timed out"))},5e3)}),[o,e,r]);return(0,i.useQuery)([e,...o],d,{staleTime:1/0,enabled:!!r&&c,initialData:s})}},32061:function(e,l,s){var t=s(28663),n=s(37414),i=s(12022),a=s(60379),r=s(33729),o=s(33299),c=s(11163),d=s(67294),u=s(9473),m=s(30385);l.Z=function(e){let{clearInputOnSubmit:l=!1,onSubmit:s}=e,x=(0,r.C0)(),h=(0,r.Lv)(),v=(0,r.RC)(),{data:p}=(0,o.useSession)(),[f,g]=(0,d.useState)(!1),[j,b]=(0,d.useState)(!1),k=(0,u.v9)(i.Pc),y=(0,u.v9)(i.pn),w=(0,u.v9)(n.ig),C=(0,u.v9)(e=>(0,n.$0)(e)||(0,i.Wf)(e))&&w>0;(0,t.W)();let N=(0,c.useRouter)(),_=(0,u.v9)(n.Du);(0,a.X)();let S=(0,d.useCallback)((e,l)=>{""!==e.trim()&&(null==s||s(e),N.push("/search?q=pending","/search?q=".concat(encodeURIComponent(e)).concat(_?"&focus=".concat(_):"").concat(C?"&copilot=true":"").concat(l?"&s=".concat(l):""),{shallow:!0}))},[C,s,N,_]),T=(0,m.Z)({clearInputOnSubmit:l,onSubmit:S}),z=(0,d.useCallback)(e=>{null!=p&&w<=0?b(!0):e&&!p&&!v&&(h||x)?g(!0):T.setIsCopilot(e)},[T,w,x,h,p]);return{...T,showHelperQueries:null!==p&&(!C&&k<10||C&&y<10),isAuthModalOpen:f,setIsAuthModalOpen:g,isPricingModalOpen:j,setIsPricingModalOpen:b,setIsCopilot:z,gpt4Limit:w,isFollowUp:!1,isSignedIn:null!==p,placeholder:r.pK,onSubmit:S}}},28663:function(e,l,s){s.d(l,{W:function(){return n}});var t=s(33299);function n(){var e,l;let{data:s}=(0,t.useSession)();return(null!==(l=null==s?void 0:null===(e=s.user)||void 0===e?void 0:e.subscription_status)&&void 0!==l?l:"none")!=="none"}},90265:function(e,l,s){s.d(l,{N:function(){return x}});var t=s(37414),n=s(58917),i=s(37122),a=s(12022),r=s(43703),o=s(33729),c=s(33299),d=s(67294),u=s(9473),m=s(36322);function x(e){let{inPage:l,inDomain:s,setUserInput:x,submitCallback:h}=e,{data:v}=(0,c.useSession)(),p=(0,d.useContext)(o.Vw),f=(0,u.v9)(t.$0),g=(0,u.v9)(a.kK),j=(0,u.v9)(i.x5),b=(0,u.v9)(i.il),k=(0,u.v9)(i.qc),y=(0,u.v9)(t.Du),w=null!=y?y:"internet",C=(0,u.v9)(a.co),N=(0,m.D)(),_=(0,u.v9)(i.x5),S=(0,n.T)(),T=N.refetch,z=null;for(let e=_.length-1;e>=0;e--){let l=_[e];if("completed"===l.status){z=null==l?void 0:l.backend_uuid;break}}let R=(0,d.useCallback)(e=>{var n,a,c;let{rawQuery:d,rawSource:u,forceNew:m,fork:y,inPageOverride:N,searchFocusOverride:_,copilotOverride:R,existingEntryUuid:P,existingUuid:W,deletedUrls:I,addedUrls:E,redoSearch:A}=e,Z=null!=R?R:f,L=d.trim();if(0===L.length){console.log("Submit failed: empty query");return}y&&S((0,i.iM)([])),null==x||x(L);let F=(0,o.Mp)(),M={...o.QI,parent_info:y?b:void 0,query_str:L,backend_uuid:P,uuid:null!=W?W:F,author_username:null==v?void 0:v.user.username,author_image:null==v?void 0:v.user.image,search_focus:null!=_?_:w,gpt4:"gpt4"===C&&!Z,personalized:g,social_info:{like_count:0,view_count:0,fork_count:0,user_likes:!1},mode:R||Z?"copilot":"concise",text:R||Z?JSON.stringify([{step_type:"INITIAL_QUERY",uuid:""}]):void 0};m?S((0,i.iM)([M])):null==P?S((0,i.w5)([M])):S((0,i._Y)({response:M}));let O=e=>{var l;if(T(),S((0,t.P5)(null!==(l=e.search_focus)&&void 0!==l?l:"internet")),null==h||h(e),p&&v){null==p||p.emit("get_rate_limit",{},e=>{var l;S((0,t.NF)(null!==(l=e.remaining)&&void 0!==l?l:0))});return}};S((0,r.M)({args:[d,{source:"default",token:"f864657",last_backend_uuid:m?void 0:z,read_write_token:m?void 0:k.rwToken,conversational_enabled:!0,frontend_session_id:o.W4,existing_entry_uuid:m?void 0:P,deleted_urls:I,added_urls:E,language:null==window?void 0:null===(n=window.navigator)||void 0===n?void 0:n.language,timezone:null===(a=null===(c=null==Intl?void 0:Intl.DateTimeFormat())||void 0===c?void 0:c.resolvedOptions())||void 0===a?void 0:a.timeZone,in_page:null!=N?N:l,in_domain:s,search_focus:null!=_?_:w,frontend_uuid:null!=W?W:F,redo_search:A,gpt4:"gpt4"===C&&!Z,mode:Z?"copilot":"concise"}],callback:O,endpointName:"perplexity_ask",socket:p})),null==x||x(""),j.length>0&&null==P&&(0,o.b2)()},[f,x,b,v,w,C,g,S,z,k.rwToken,l,s,p,j.length,T,h]);return R}},89224:function(e,l,s){s.d(l,{z:function(){return a}});var t=s(1604),n=s(99611);let i=t.z.object({askEnabled:t.z.boolean(),feedbackEnabled:t.z.boolean().optional(),autosuggestEnabled:t.z.boolean().optional()}).nullish();function a(){var e,l,s;let t=(0,n.Z)("service_status"),a=i.parse(t.data);return{...t,askEnabled:null===(e=null==a?void 0:a.askEnabled)||void 0===e||e,feedbackEnabled:null!==(l=null==a?void 0:a.feedbackEnabled)&&void 0!==l&&l,autosuggestEnabled:null!==(s=null==a?void 0:a.autosuggestEnabled)&&void 0!==s&&s}}},43703:function(e,l,s){s.d(l,{H:function(){return o},M:function(){return r}});var t=s(33729),n=s(60788),i=s(37414),a=s(37122);let r=(0,n.hg)("results/submit",async(e,l)=>{var s;let{endpointName:n,socket:r,args:o,callback:c}=e;setTimeout(()=>{l.getState().ask.isCopilot&&l.dispatch((0,i.DU)())},200);let d=e=>{t.zW.startStreamResponse(),e&&(null==e?void 0:e.status)==="pending"&&((0,t.b2)(!0),l.dispatch((0,a._Y)({response:e})))},u=e=>{t.zW.endStreamResponse(),l.dispatch((0,a._Y)({response:e})),e&&(null==e?void 0:e.status)!=="failed"?t.zW.successfulResponse(e):t.zW.failedResponse(e)},m=e=>{u(e),null==c||c(e)};r.on("query_progress",d),r.emit(n,...null!=o?o:[{}],m),t.zW.submitQuery(n,null==o?void 0:o[0],null==o?void 0:o[1],!0,!!(null==o?void 0:null===(s=o[1])||void 0===s?void 0:s.last_backend_uuid))}),o=(0,n.hg)("results/deleteLast",async(e,l)=>{let{socket:s}=e,t=(0,a.x5)(l.getState()),n=(0,a.bd)(l.getState()),i=(0,a.qc)(l.getState());null==s||s.emit("delete_ask_entry",null==n?void 0:n.backend_uuid,{read_write_token:i.rwToken},e=>{});let r=t.slice(0,-1),o=r.slice(-1)[0];return l.dispatch((0,a.by)()),new Promise(e=>e(o))})},11238:function(e,l,s){s.d(l,{U:function(){return t}});let t=()=>{let e=new Event("visibilitychange");document.dispatchEvent(e)}},60379:function(e,l,s){s.d(l,{X:function(){return i}});var t=s(33729),n=s(11163);function i(){let e=(0,n.useRouter)(),l=(0,t.f3)(),s=l?window.location.origin:"https://www.perplexity.ai",i=new URL("".concat(s).concat(e.asPath)).searchParams;return i}}}]);